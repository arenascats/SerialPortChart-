[
  {
    "Id": "278739",
    "ThreadId": "81241",
    "Html": "<p>Hello,</p>\r\n<p>I have this scatter plot which I've created - it's pretty much based on the BigPointArrayPage example in the NewMarkersSample project.</p>\r\n<p>The relevant plot xaml is below:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>            <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart</span> <span style=\"color:Red\">Name</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">markerChart</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">IndependentValuePath</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">X</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">DependentValuePath</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Y</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">BoundsUnionMode</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Bounds</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Blue\">&gt;</span>\r\n                <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart.MarkerBuilder</span><span style=\"color:Blue\">&gt;</span>\r\n                    <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">TemplateMarkerGenerator</span><span style=\"color:Blue\">&gt;</span>\r\n                        <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">DataTemplate</span> <span style=\"color:Red\">DataType</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{x:Type Point}</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n                            <span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">Ellipse</span> <span style=\"color:Red\">Width</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">5</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Height</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">5</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">SnapsToDevicePixels</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">True</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Focusable</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">False</span><span style=\"color:Black\">&quot;</span>\r\n                                     <span style=\"color:Red\">Fill</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{Binding RelativeSource={RelativeSource Self}, Path=DataContext, Converter={StaticResource converter}}</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n                            <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">Ellipse</span><span style=\"color:Blue\">&gt;</span>\r\n                        <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">DataTemplate</span><span style=\"color:Blue\">&gt;</span>\r\n                    <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">TemplateMarkerGenerator</span><span style=\"color:Blue\">&gt;</span>\r\n                <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart.MarkerBuilder</span><span style=\"color:Blue\">&gt;</span>\r\n            <span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart</span><span style=\"color:Blue\">&gt;</span>\r\n\r\n</pre>\r\n</div>\r\n<p>After the points chart is built, I set the visible bounds as follows:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>MinXValue = (<span style=\"color:Blue\">from</span> p <span style=\"color:Blue\">in</span> pts <span style=\"color:Blue\">select</span> p.X).Min();\r\nMinYValue = (<span style=\"color:Blue\">from</span> p <span style=\"color:Blue\">in</span> pts <span style=\"color:Blue\">select</span> p.Y).Min();\r\nMaxXValue = (<span style=\"color:Blue\">from</span> p <span style=\"color:Blue\">in</span> pts <span style=\"color:Blue\">select</span> p.X).Max();\r\nMaxYValue = (<span style=\"color:Blue\">from</span> p <span style=\"color:Blue\">in</span> pts <span style=\"color:Blue\">select</span> p.Y).Max();\r\n<span style=\"color:Blue\">double</span> w = MaxXValue - MinXValue;\r\n<span style=\"color:Blue\">double</span> h = MaxYValue - MinYValue;\r\n\r\nplotter.Visible = <span style=\"color:Blue\">new</span> DataRect(MinXValue - w/30, MinYValue - h/30, w + w/15, h + h/15);\r\n\r\n</pre>\r\n</div>\r\n<p>The initial bounds are set properly; however, after moving, zooming, etc, all with the built in DDD navigation functionality, when I right-click in the chart and perform a View to Fit, I end up going into an infinite loop where the axes/chart bounds go crazy, as if they could not determine the bounds of the chart. &nbsp;If you would take a look at the wmv file at the location below (20 seconds, download size is 323kb), you'll see what I mean. &nbsp;</p>\r\n<p><a href=\"http://cid-702233e61e834ac6.skydrive.live.com/self.aspx/.Public/ScatterPlotProblem.wmv?authkey=RrIauP9jpM8$\">http://cid-702233e61e834ac6.skydrive.live.com/self.aspx/.Public/ScatterPlotProblem.wmv?authkey=RrIauP9jpM8%24</a></p>\r\n<p>Would any of you have any idea as to what could be causing this?</p>\r\n<p>Thanks very much,</p>\r\n<p>E.</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-01-18T21:13:34.25-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "279283",
    "ThreadId": "81241",
    "Html": "<p>Just to provide a bit more detail, my plotter also has a RectangleSelector, e.g.:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">ChartPlotter</span> <span style=\"color:Red\">Name</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">plotter</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Blue\">&gt;</span>\r\n\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart</span> <span style=\"color:Red\">Name</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">markerChart</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">IndependentValuePath</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">X</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">DependentValuePath</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">Y</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Blue\">&gt;</span>\r\n\t\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart.MarkerBuilder</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">TemplateMarkerGenerator</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t\t\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">DataTemplate</span> <span style=\"color:Red\">DataType</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{x:Type Point}</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t\t\t\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">Ellipse</span> <span style=\"color:Red\">Width</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">5</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Height</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">5</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">SnapsToDevicePixels</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">True</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Focusable</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">False</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">/&gt;</span>\r\n\t\t\t\t<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">DataTemplate</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t\t<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">TemplateMarkerGenerator</span><span style=\"color:Blue\">&gt;</span>\r\n\t\t<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart.MarkerBuilder</span><span style=\"color:Blue\">&gt;</span>\r\n\t<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">DevMarkerChart</span><span style=\"color:Blue\">&gt;</span>\r\n\r\n\t<span style=\"color:Blue\">&lt;</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">RectangleSelector</span> <span style=\"color:Red\">Name</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">selector</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">Mode</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">ClickAndDragSelect</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Red\">RectangleTemplate</span><span style=\"color:Blue\">=</span><span style=\"color:Black\">&quot;</span><span style=\"color:Blue\">{StaticResource SelectorTemplate}</span><span style=\"color:Black\">&quot;</span> <span style=\"color:Blue\">/&gt;</span>\r\n<span style=\"color:Blue\">&lt;/</span><span style=\"color:#A31515\">d3</span><span style=\"color:Blue\">:</span><span style=\"color:#A31515\">ChartPlotter</span><span style=\"color:Blue\">&gt;</span>\r\n\r\n</pre>\r\n</div>\r\n<p>By default, the selector object's SelectedRectangle.IsEmpty is true. &nbsp; Upon clicking Fit to View, we wind up in Viewport2D.UpdateContentBoundsHosts(), which calls UpdateVisible which eventually winds up in Viewport2D.CoerceVisible.</p>\r\n<p>In CoerceVisible, the bounds grow as a result of a call to CoordinateUtilities.RectZoom &nbsp;with a clipToBoundsEnlargeFactor = 1.1. &nbsp;Upon the bounds growing a, a newVisible Visible rect is returned, which eventually calls viewport.RaisePropertyChangedEvent with the new Visible rectangle, which calls UpdateContentBoundsHosts(), and so we begin again, going in an infinite loop, making the plotter grow and grow...</p>\r\n<p>Perhaps this is a a bug somewhere stemming in the CoerceVisible logic?</p>\r\n<p>Anyhow, for now, setting the selector object's&nbsp;SelectedRectangle property to &quot;0,0,0,0&quot; at the beginning is a workaround, but it's not pretty, because then it's visible, even when its size is zero... &nbsp;So I needed to add logic to make the RectangleTemplate's Visibility set to Collapsed when the SelectedRectangle is 0. &nbsp;Again, not pretty, but it works for now.</p>\r\n<p>Just posting in case anyone encounters a similar issue.</p>\r\n<p>E.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-01-19T20:10:30.627-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]