[
  {
    "Id": "262922",
    "ThreadId": "76901",
    "Html": "<p>Hi,<br><br>I have a list of lines and circular arcs that I want to plot. But I couldn't manage to plot ArcSegment (for circular arcs) successfully. I've looked at the samples and found that whenever a System.Window.Shapes element is plotted a ViewportHostPanel or ViewportPanel is used. I don't know what they are used for but I've tried the same for my Path object which holds the arcSegment but it didn't work. The thing is the lines are are fit to ChartPlotter and the size and position is correct according to axes but for arcSegment neither the size nor the position is correct.<br><br>I've used the below code to dynamically do this but as I said it doesn't work (here I didn't use ViewportPanel or ViewportHostPanel since I couldn't make them work):</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> tbtnLoad_Click(<span style=\"color:Blue\">object</span> sender, RoutedEventArgs e) {\r\n  AddLineGraph(<span style=\"color:Blue\">new</span> Point(0, 0), <span style=\"color:Blue\">new</span> Point(0, 50));\r\n  AddCircularArcGraph(<span style=\"color:Blue\">new</span> Point(0, 0), <span style=\"color:Blue\">new</span> Point(50, 50), <span style=\"color:Blue\">new</span> Size(30, 30));\r\n  AddLineGraph(<span style=\"color:Blue\">new</span> Point(50, 50), <span style=\"color:Blue\">new</span> Point(0, 50));\r\n}\r\n\r\n<span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> AddLineGraph(Point startPoint, Point endPoint) {\r\n  <span style=\"color:Blue\">var</span> ds = <span style=\"color:Blue\">new</span> EnumerableDataSource&lt;Point&gt;(<span style=\"color:Blue\">new</span> List&lt;Point&gt; {\r\n        <span style=\"color:Blue\">new</span> Point { X = startPoint.X, Y = startPoint.Y }, \r\n        <span style=\"color:Blue\">new</span> Point { X = endPoint.X, Y = endPoint.Y } \r\n      });\r\n  ds.SetXYMapping(pt =&gt; pt);\r\n\r\n  cpGeometries.AddLineGraph(ds);\r\n}\r\n\r\n<span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> AddCircularArcGraph(Point startPoint, Point endPoint, Size size) {\r\n  PathFigure pf = <span style=\"color:Blue\">new</span> PathFigure();\r\n  pf.StartPoint = <span style=\"color:Blue\">new</span> Point(startPoint.X, startPoint.Y);\r\n\r\n  ArcSegment arcSegment = <span style=\"color:Blue\">new</span> ArcSegment();\r\n  arcSegment.Point = <span style=\"color:Blue\">new</span> Point(endPoint.X, endPoint.Y);\r\n  arcSegment.Size = size;\r\n  arcSegment.SweepDirection = SweepDirection.Clockwise;\r\n\r\n  PathSegmentCollection psc = <span style=\"color:Blue\">new</span> PathSegmentCollection();\r\n  psc.Add(arcSegment);\r\n\r\n  pf.Segments = psc;\r\n\r\n  PathFigureCollection pfc = <span style=\"color:Blue\">new</span> PathFigureCollection();\r\n  pfc.Add(pf);\r\n\r\n  PathGeometry pg = <span style=\"color:Blue\">new</span> PathGeometry();\r\n  pg.Figures = pfc;\r\n\r\n  <span style=\"color:Blue\">var</span> path = <span style=\"color:Blue\">new</span> Path();\r\n  path.Stroke = Brushes.Black;\r\n  path.StrokeThickness = 1;\r\n  path.Data = pg;\r\n\r\n  <span style=\"color:Green\">//var vp = new ViewportHostPanel();</span>\r\n  <span style=\"color:Green\">//vp.SetValue(ViewportHostPanel.XProperty, 0.2);</span>\r\n  <span style=\"color:Green\">//vp.SetValue(ViewportHostPanel.YProperty, 0.2);</span>\r\n  <span style=\"color:Green\">//vp.SetValue(ViewportHostPanel.WidthProperty, arcSegment.Size.Width * 2);</span>\r\n  <span style=\"color:Green\">//vp.SetValue(ViewportHostPanel.HeightProperty, arcSegment.Size.Height * 2);</span>\r\n\r\n  <span style=\"color:Green\">//vp.Children.Add(path);</span>\r\n  <span style=\"color:Green\">//cpGeometries.Children.Add(vp);</span>\r\n  cpGeometries.Children.Add(path);\r\n}\r\n\r\n</pre>\r\n</div>\r\n<p>Can anybody point me in the right direction?</p>\r\n<p>Thanks in advance</p>",
    "PostedDate": "2009-12-02T13:16:23.527-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "264099",
    "ThreadId": "76901",
    "Html": "<p>There is no one that has any idea? I'm really stuck and run out of ideas :(</p>\r\n<p>Thanks</p>",
    "PostedDate": "2009-12-06T03:31:24.103-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "264592",
    "ThreadId": "76901",
    "Html": "<p>&nbsp;</p>\r\n<p>Hi,</p>\r\n<p>I have modified a little your code to make it correct and reach your desired target, as I understood it:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre><span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> Window_Loaded(<span style=\"color:Blue\">object</span> sender, RoutedEventArgs e)\r\n\t\t{\r\n\t\t\tAddLineGraph(<span style=\"color:Blue\">new</span> Point(0, 0), <span style=\"color:Blue\">new</span> Point(0, 50));\r\n\t\t\tAddCircularArcGraph(<span style=\"color:Blue\">new</span> Point(0, 0), <span style=\"color:Blue\">new</span> Point(50, -50), <span style=\"color:Blue\">new</span> Size(50, 50));\r\n\t\t\tAddLineGraph(<span style=\"color:Blue\">new</span> Point(50, 50), <span style=\"color:Blue\">new</span> Point(0, 50));\r\n\t\t}\r\n\r\n\t\t<span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> AddLineGraph(Point startPoint, Point endPoint)\r\n\t\t{\r\n\t\t\t<span style=\"color:Blue\">var</span> ds = <span style=\"color:Blue\">new</span> EnumerableDataSource&lt;Point&gt;(<span style=\"color:Blue\">new</span> List&lt;Point&gt; {\r\n        <span style=\"color:Blue\">new</span> Point { X = startPoint.X, Y = startPoint.Y }, \r\n        <span style=\"color:Blue\">new</span> Point { X = endPoint.X, Y = endPoint.Y } \r\n      });\r\n\t\t\tds.SetXYMapping(pt =&gt; pt);\r\n\r\n\t\t\tplotter.AddLineGraph(ds);\r\n\t\t}\r\n\r\n\t\t<span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> AddCircularArcGraph(Point startPoint, Point endPoint, Size size)\r\n\t\t{\r\n\t\t\tPathFigure pf = <span style=\"color:Blue\">new</span> PathFigure();\r\n\t\t\tpf.StartPoint = <span style=\"color:Blue\">new</span> Point(startPoint.X, startPoint.Y);\r\n\r\n\t\t\tArcSegment arcSegment = <span style=\"color:Blue\">new</span> ArcSegment();\r\n\t\t\tarcSegment.Point = <span style=\"color:Blue\">new</span> Point(endPoint.X, endPoint.Y);\r\n\t\t\tarcSegment.Size = size;\r\n\t\t\tarcSegment.SweepDirection = SweepDirection.Counterclockwise;\r\n\r\n\t\t\tPathSegmentCollection psc = <span style=\"color:Blue\">new</span> PathSegmentCollection();\r\n\t\t\tpsc.Add(arcSegment);\r\n\r\n\t\t\tpf.Segments = psc;\r\n\r\n\t\t\tPathFigureCollection pfc = <span style=\"color:Blue\">new</span> PathFigureCollection();\r\n\t\t\tpfc.Add(pf);\r\n\r\n\t\t\tPathGeometry pg = <span style=\"color:Blue\">new</span> PathGeometry();\r\n\t\t\tpg.Figures = pfc;\r\n\r\n\t\t\t<span style=\"color:Blue\">var</span> path = <span style=\"color:Blue\">new</span> Path();\r\n\t\t\tpath.Stroke = Brushes.Black;\r\n\t\t\tpath.StrokeThickness = 1;\r\n\t\t\tpath.Data = pg;\r\n\t\t\tpath.Fill = Brushes.Orange;\r\n\t\t\tpath.Stretch = Stretch.Fill;\r\n\r\n\t\t\t<span style=\"color:Blue\">var</span> viewportPanel = <span style=\"color:Blue\">new</span> ViewportHostPanel();\r\n\t\t\tViewportPanel.SetViewportBounds(path, <span style=\"color:Blue\">new</span> DataRect(0, 0, 50, 50));\r\n\t\t\tviewportPanel.Children.Add(path);\r\n\t\t\tplotter.Children.Add(viewportPanel);\r\n\t\t}\r\n</pre>\r\n</div>\r\n<p>PathSegment has one negative coordinate, because in WPF screen coordinates' Y axis goes from top of the screen to its bottom, and in D3 Y axis goes in natural mathematical way - from bottom to top.</p>\r\n<p>Hope this will help.</p>\r\n<p>Best regards,</p>\r\n<p>Mikhail.</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2009-12-07T11:48:59.527-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "264673",
    "ThreadId": "76901",
    "Html": "<p>Thanks so much for the help. I would have never figured out the part with ViewportHostPanel and path.Stretch.</p>",
    "PostedDate": "2009-12-07T15:39:08.113-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "276087",
    "ThreadId": "76901",
    "Html": "<p>Hi,</p>\r\n<div>It's been long time but I wanted to ask one more thing about the code above: In AddCircularGraphMethod method we specify viewport bounds as:</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">ViewportPanel.SetViewportBounds(path, new DataRect(0, 0, 50, 50));</div>\r\n<div>How do we find the values (0, 0, 50, 50)?</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">I have lots of lines and arcs that are connected but they are not plotted as connected. The bounds surely come from\r\nthe start, end and size values but I couldn't figure this out. For example I wasn't able to plot these two lines and arc as connected (which should be connected):</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">AddLineGraph(nPointD(0.164141472, 1.44), new PointD(0.201979003, 1.556451947));</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">AddCircularArcGraph(new PointD(0.201979003, 1.556451947), new PointD(0.198936336, 1.5671688), new PointD(0.192468438, 1.559542117));</div>\r\n<div id=\"_mcePaste\" style=\"left:-10000px;top:0px;width:1px;height:1px;overflow-x:hidden;overflow-y:hidden\">AddLineGraph(new PointD(0.198936336, 1.5671688), new PointD(0.169118814, 1.592455898)Thi</div>\r\n<p>It's been long time but I wanted to ask one more thing about the code above: In AddCircularGraphMethod method we specify viewport bounds as:</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>ViewportPanel.SetViewportBounds(path, <span style=\"color:Blue\">new</span> DataRect(0, 0, 50, 50));\r\n</pre>\r\n</div>\r\n<p>How do we find the values (0, 0, 50, 50)?</p>\r\n<p>I have lots of lines and arcs that are connected but they are not plotted as connected. The bounds surely come from the start, end and size values but I couldn't figure this out. For example I wasn't able to plot these two lines and arc as connected (which are be connected):</p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>AddLineGraph(<span style=\"color:Blue\">new</span> PointD(0.164141472, 1.44), <span style=\"color:Blue\">new</span> PointD(0.201979003, 1.556451947));\r\nAddCircularArcGraph(<span style=\"color:Blue\">new</span> PointD(0.201979003, 1.556451947), <span style=\"color:Blue\">new</span> PointD(0.198936336, 1.5671688), <span style=\"color:Blue\">new</span> PointD(0.192468438, 1.559542117));\r\nAddLineGraph(<span style=\"color:Blue\">new</span> PointD(0.198936336, 1.5671688), <span style=\"color:Blue\">new</span> PointD(0.169118814, 1.592455898));\r\n</pre>\r\n</div>\r\n<p>How can manage to plot them successfully as connected entities?</p>\r\n<p>By the way, I've changed the above code a little bit: The third parameter of AddCircularArcGraph method takes the center point instead of size and also multiplied Y ordinals by -1 to adjust with WPF coordinate system. But the&nbsp;<span style=\"font-family:Consolas, 'Courier New', Courier, monospace;white-space:pre\">viewportPanel.SetViewportBounds <span style=\"font-family:'Segoe UI', 'Microsoft Sans Serif', Arial, Geneva, sans-serif;white-space:normal\">part doesn't seem to work:</span></span></p>\r\n<div style=\"color:Black;background-color:White\">\r\n<pre>    <span style=\"color:Blue\">private</span> <span style=\"color:Blue\">void</span> AddCircularArcGraph(Point startPoint, Point endPoint, <span style=\"color:#ff0000\">PointD centerPoint</span>) {\r\n      PathFigure pf = <span style=\"color:Blue\">new</span> PathFigure();\r\n      pf.StartPoint = <span style=\"color:Blue\">new</span> Point(startPoint.X, startPoint.Y<span style=\"color:#ff0000\"> * -1</span>);\r\n\r\n      ArcSegment arcSegment = <span style=\"color:Blue\">new</span> ArcSegment();\r\n      arcSegment.Point = <span style=\"color:Blue\">new</span> Point(endPoint.X, endPoint.Y<span style=\"color:#ff0000\"> * -1</span>);\r\n      arcSegment.SweepDirection = SweepDirection.Counterclockwise;\r\n      arcSegment.IsLargeArc = <span style=\"color:Blue\">false</span>;\r\n\r\n      <span style=\"color:Blue\">var</span> radius = Math.Sqrt(Math.Pow(startPoint.X - centerPoint.X, 2) + Math.Pow(startPoint.Y - centerPoint.Y, 2));\r\n      arcSegment.Size = <span style=\"color:Blue\">new</span> Size(radius, radius);\r\n\r\n      PathSegmentCollection psc = <span style=\"color:Blue\">new</span> PathSegmentCollection();\r\n      psc.Add(arcSegment);\r\n\r\n      pf.Segments = psc;\r\n\r\n      PathFigureCollection pfc = <span style=\"color:Blue\">new</span> PathFigureCollection();\r\n      pfc.Add(pf);\r\n\r\n      PathGeometry pg = <span style=\"color:Blue\">new</span> PathGeometry();\r\n      pg.Figures = pfc;\r\n\r\n      <span style=\"color:Blue\">var</span> path = <span style=\"color:Blue\">new</span> Path();\r\n      path.Stroke = Brushes.Black;\r\n      path.StrokeThickness = 1;\r\n      path.Data = pg;\r\n      path.Fill = Brushes.Orange;\r\n      path.Stretch = Stretch.Fill;\r\n\r\n      <span style=\"color:Blue\">var</span> viewportPanel = <span style=\"color:Blue\">new</span> ViewportHostPanel();\r\n      viewportPanel.SetViewportBounds(path, <span style=\"color:Blue\">new</span> DataRect(Math.Min(startPoint.X, endPoint.X), Math.Min(startPoint.Y, endPoint.Y), radius, radius));\r\n      viewportPanel.Children.Add(path);\r\n      plotter.Children.Add(viewportPanel);\r\n    }\r\n</pre>\r\n</div>\r\n<p>Thanks in advance</p>",
    "PostedDate": "2010-01-12T02:30:50.847-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "290915",
    "ThreadId": "76901",
    "Html": "<p>Hi,</p>\r\n<p>I've asked this followup question a while ago but didn't get any answer and I still couldn't find out how to set viewport bounds of a ViewportHostPanel that will hold an ArcSegment.</p>\r\n<p>Can anyone help?</p>\r\n<p>Thanks in advance</p>",
    "PostedDate": "2010-02-15T09:46:24.68-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]